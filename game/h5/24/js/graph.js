function Graph(t){function e(t,e,r,a,s){switch(s){case 1:for(var i=0;i<t.length;i+=2){if(parseInt(t[i+1])+e+1>=a.row)return!1;if(0!=a.datas[parseInt(t[i+1])+e+1+(r+parseInt(t[i]))*a.row])return!1}break;case 2:for(i=0;i<t.length;i+=2){if(parseInt(t[i+1])+e-1<0)return!1;if(0!=a.datas[parseInt(t[i+1])+e-1+(r+parseInt(t[i]))*a.row])return!1}break;case 3:for(i=0;i<t.length;i+=2)if(parseInt(t[i])+r+1>=a.col||0!=a.datas[parseInt(t[i+1])+e+(parseInt(t[i])+r+1)*a.row])return!1;break;case 4:for(i=0;i<t.length;i+=2){var n=3-t[i];if(n+e<0||n+e>=a.row)return!1}}return!0}this.divs=[],this.parentFrame=t,this.x=0,this.y=0,this.zb=[],this.line=0,this.init=function(t,e){var r=(this.parentFrame.row-4)/2;this.x=r;var a=this.parentFrame.arr[t].split(",");this.zb=a;for(var s=0;s<8;s+=2){var i=document.createElement("div");i.className="smallDiv",i.style.backgroundColor=e,i.style.width=this.parentFrame.unit-2+"px",i.style.height=this.parentFrame.unit-2+"px",i.style.top=(a[s]-0)*this.parentFrame.unit+"px",i.style.left=(a[s+1]-0+r)*this.parentFrame.unit+"px",this.divs.push(i),document.getElementById("MainFrame").appendChild(i)}},this.moveleft=function(){if(e(this.zb,this.x,this.y,this.parentFrame,2)){this.x-=1;for(var t=0;t<this.divs.length;t++){var r=parseInt(this.divs[t].style.left);this.divs[t].style.left=r-this.parentFrame.unit+"px"}}},this.moveright=function(){var t=e(this.zb,this.x,this.y,this.parentFrame,1);if(console.log(t),e(this.zb,this.x,this.y,this.parentFrame,1)){this.x+=1;for(var r=0;r<this.divs.length;r++){var a=parseInt(this.divs[r].style.left);this.divs[r].style.left=a+this.parentFrame.unit+"px"}}},this.change=function(){e(this.zb,this.x,this.y,this.parentFrame,4)||(this.x<0?this.x+=1:this.x-=1);for(var t=0;t<this.divs.length;t++){var r=this.zb[2*t];this.zb[2*t]=this.zb[2*t+1],this.zb[2*t+1]=3-r,this.divs[t].style.top=(this.y+parseInt(this.zb[2*t]))*this.parentFrame.unit+"px",this.divs[t].style.left=(this.x+parseInt(this.zb[2*t+1]))*this.parentFrame.unit+"px"}},this.movedown=function(){var t="window"==this?this.frame.samlldiv:this;if(e(t.zb,t.x,t.y,t.parentFrame,3)){t.y+=1;for(var r=0;r<t.divs.length;r++){var a=parseInt(t.divs[r].style.top);t.divs[r].style.top=a+t.parentFrame.unit+"px"}return!1}clearInterval(t.parentFrame.intervalid);for(r=0;r<t.divs.length;r++){var s=t.y+parseInt(t.zb[2*r]),i=t.x+parseInt(t.zb[2*r+1]);t.parentFrame.datas[s*t.parentFrame.row+i]=1,t.divs[r].dataset.row=s,t.divs[r].dataset.col=i,t.divs[r].className="smallDivblack",t.divs[r].style.backgroundColor="black"}for(r=0;r<t.parentFrame.col;r++){for(var n=0;n<t.parentFrame.row&&1==t.parentFrame.datas[r*t.parentFrame.row+n];n++);if(n==t.parentFrame.row){for(var h,p,o=document.getElementById("TFrime").getElementsByClassName("smallDivblack"),l=0;l<o.length;l++)p=parseInt(o[l].dataset.row),h=parseInt(o[l].dataset.col),p==r&&(t.parentFrame.datas[p*t.parentFrame.row+h]=0,o[l].remove(),l--);for(l=r-1;l>0;l--)for(var m=0;m<o.length;m++)if(p=parseInt(o[m].dataset.row),h=parseInt(o[m].dataset.col),p==l){var v=parseInt(o[m].style.top);o[m].style.top=v+t.parentFrame.unit+"px",o[m].dataset.row++,t.parentFrame.datas[p*t.parentFrame.row+h]=0,t.parentFrame.datas[(p+1)*t.parentFrame.row+h]=1}t.line++}}return!0},this.rescore=function(){var t=document.getElementById("score");t.innerHTML=parseInt(t.innerHTML)+this.parentFrame.score[this.line]}}